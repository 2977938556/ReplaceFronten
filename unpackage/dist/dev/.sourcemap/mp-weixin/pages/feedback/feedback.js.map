{"version":3,"file":"feedback.js","sources":["pages/feedback/feedback.vue","pages/feedback/feedback.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <!-- 1. 顶部区域 (状态栏 + 导航栏) -->\n    <view class=\"header-section\">\n      <!-- 状态栏占位 -->\n      <view :style=\"{ height: statusBarHeight + 'px' }\"></view>\n      <!-- 导航栏 -->\n      <view class=\"nav-bar\">\n        <view class=\"nav-btn\" @click=\"goBack\">\n          <!-- 修复：使用 Base64 图片代替 svg 标签 -->\n          <image class=\"icon-img\" src=\"../../static/all-black.png\" mode=\"aspectFit\"></image>\n        </view>\n        <view class=\"page-title\">意见反馈</view>\n        <view style=\"width:36px;\"></view> <!-- 占位平衡 -->\n      </view>\n    </view>\n\n    <!-- 2. 中间滚动内容区 (flex: 1 自动撑满剩余空间) -->\n    <scroll-view scroll-y class=\"scroll-content\">\n      <view class=\"content-wrapper\">\n        \n        <!-- 类型选择 -->\n        <view class=\"section-label\">反馈类型</view>\n        <view class=\"type-group\">\n          <view \n            v-for=\"(item, index) in types\" \n            :key=\"index\"\n            class=\"type-chip\" \n            :class=\"{ active: currentTypeIndex === index }\" \n            @click=\"selectType(index)\"\n          >\n            {{ item.label }}\n          </view>\n        </view>\n\n        <!-- 内容输入 -->\n        <view class=\"section-label\">详细描述</view>\n        <view class=\"input-card\">\n          <textarea \n            class=\"feedback-textarea\" \n            v-model=\"content\" \n            placeholder=\"请详细描述您遇到的问题或建议...\" \n            :maxlength=\"maxChar\" \n            @input=\"handleInput\"\n            cursor-spacing=\"20\"\n            :disable-default-padding=\"true\"\n          ></textarea>\n        \n          <!-- 图片上传 -->\n          <view class=\"media-grid\">\n            <view class=\"media-item\" v-for=\"(img, index) in imageList\" :key=\"index\">\n              <image class=\"media-img\" :src=\"img\" mode=\"aspectFill\"></image>\n              <view class=\"delete-btn\" @click=\"removeImage(index)\">\n                <!-- 修复：删除图标 Base64 -->\n                <image style=\"width:12px;height:12px;\" src=\"../../static/all-delete.png\" mode=\"aspectFit\"></image>\n              </view>\n            </view>\n\n            <view class=\"add-btn\" v-if=\"imageList.length < 9\" @click=\"chooseImage\">\n              <!-- 修复：添加图标 Base64 -->\n              <image style=\"width:24px;height:24px;\" src=\"../../static/all-add.png\" mode=\"aspectFit\"></image>\n            </view>\n          </view>\n\n          <view class=\"char-count\">{{ currentCharCount }}/{{ maxChar }}</view>\n        </view>\n\n        <!-- 联系方式 -->\n        <view class=\"section-label\">联系方式 (选填)</view>\n        <view class=\"contact-input-box\">\n          <input \n            class=\"contact-input\" \n            v-model=\"contactInfo\" \n            placeholder=\"留下您的微信或邮箱\" \n            placeholder-class=\"input-placeholder\"\n          />\n        </view>\n\n      </view>\n    </scroll-view>\n\n    <!-- 3. 底部固定区域 (不再使用 absolute，而是 Flex 布局的一部分) -->\n    <view class=\"footer-section\" :style=\"{ paddingBottom: (safeAreaBottom + 20) + 'px' }\">\n      <button \n        class=\"submit-btn\" \n        :class=\"{ disabled: isSubmitting }\" \n        :disabled=\"isSubmitting\" \n        @click=\"submitFeedback\"\n      >\n        {{ submitBtnText }}\n      </button>\n    </view>\n\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\n\n// --- 状态定义 ---\nconst statusBarHeight = ref(0);\nconst safeAreaBottom = ref(0);\nconst currentTypeIndex = ref(0);\nconst content = ref('');\nconst contactInfo = ref('');\nconst maxChar = 200;\nconst currentCharCount = ref(0);\nconst imageList = ref([]);\nconst isSubmitting = ref(false);\n\nconst types = [\n  { label: '功能建议', value: 'proposal' },\n  { label: '产品 Bug', value: 'bug' },\n  { label: '其他吐槽', value: 'other' }\n];\n\n// --- 计算属性 ---\nconst submitBtnText = computed(() => isSubmitting.value ? '提交中...' : '提交反馈');\n\n// --- 生命周期 ---\nonMounted(() => {\n  const systemInfo = uni.getSystemInfoSync();\n  statusBarHeight.value = systemInfo.statusBarHeight || 44;\n  // 底部安全区，如果没有则给个默认值 0\n  safeAreaBottom.value = systemInfo.safeAreaInsets ? systemInfo.safeAreaInsets.bottom : 0;\n});\n\n// --- 方法 ---\nconst selectType = (index) => { currentTypeIndex.value = index; };\nconst handleInput = (e) => { currentCharCount.value = e.detail.value.length; };\nconst removeImage = (index) => { imageList.value.splice(index, 1); };\nconst goBack = () => { uni.navigateBack({ delta: 1 }); };\n\nconst chooseImage = () => {\n  uni.chooseImage({\n    count: 9 - imageList.value.length,\n    sizeType: ['compressed'],\n    sourceType: ['album', 'camera'],\n    success: (res) => {\n      imageList.value = [...imageList.value, ...res.tempFilePaths];\n    }\n  });\n};\n\nconst submitFeedback = () => {\n  if (content.value.length < 1) {\n    uni.showToast({ title: '请填写反馈内容', icon: 'none' });\n    return;\n  }\n  isSubmitting.value = true;\n  setTimeout(() => {\n    isSubmitting.value = false;\n    uni.showToast({ title: '提交成功', icon: 'success' });\n  }, 1000);\n};\n</script>\n\n<style scoped>\n/* --- 变量 --- */\n:root {\n  --primary: #111111;\n  --surface: #FFFFFF;\n  --bg: #F5F7FA;\n  --text-main: #1D1D1F;\n  --text-sub: #8E8E93;\n}\n\n/* 核心布局修复：使用 Flex Column 撑满屏幕 */\n.page {\n  background-color: var(--bg);\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; /* 防止页面整体滚动 */\n}\n\n/* 头部固定 */\n.header-section {\n  flex-shrink: 0;\n  background-color: var(--bg);\n  z-index: 10;\n}\n\n.nav-bar {\n  height: 44px;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.nav-btn {\n  width: 32px; \n  height: 32px;\n  border-radius: 50%;\n  display: flex; \n  justify-content: center; \n  align-items: center;\n  background: rgba(0,0,0,0.03);\n}\n\n.icon-img {\n  width: 20px;\n  height: 20px;\n}\n\n.page-title {\n  font-size: 17px;\n  font-weight: 600;\n  color: var(--text-main);\n}\n\n/* 中间滚动区 - 关键修复 */\n.scroll-content {\n  flex: 1; /* 占据剩余所有高度 */\n  height: 0; /* 必须设置，否则 flex 可能会失效 */\n  width: 100%;\n}\n\n.content-wrapper {\n  padding: 10px 20px 40px 20px; /* 底部加点 padding 防止贴底 */\n}\n\n/* 底部固定区 - 关键修复 */\n.footer-section {\n  flex-shrink: 0; /* 不允许被压缩 */\n  background: var(--bg); /* 确保背景不透明 */\n  padding: 10px 24px;\n  /* 阴影效果向上投射 */\n  box-shadow: 0 -4px 10px rgba(0,0,0,0.03);\n  position: relative;\n  z-index: 100;\n}\n\n.submit-btn {\n  width: 100%; \n  height: 52px;\n  background: var(--primary);\n  border-radius: 26px;\n  color: white;\n  font-size: 16px;\n  font-weight: 600;\n  border: none;\n  display: flex; \n  justify-content: center; \n  align-items: center;\n}\n.submit-btn::after { border: none; }\n.submit-btn:active { opacity: 0.8; }\n.submit-btn.disabled { background: #E5E5E5; color: #AAA; }\n\n/* --- 样式细节 --- */\n.section-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-main);\n  margin-bottom: 12px;\n  margin-top: 24px;\n  margin-left: 4px;\n}\n.section-label:first-child { margin-top: 0; }\n\n.type-group { display: flex; gap: 10px; margin-bottom: 10px; }\n\n.type-chip {\n  flex: 1;\n  height: 40px;\n  background: var(--surface);\n  border-radius: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 13px;\n  font-weight: 500;\n  color: var(--text-sub);\n  border: 1px solid transparent;\n}\n.type-chip.active {\n  background: var(--primary);\n  color: white;\n  box-shadow: 0 4px 10px rgba(0,0,0,0.15);\n}\n\n.input-card {\n  background: var(--surface);\n  border-radius: 16px;\n  padding: 16px;\n  position: relative;\n  margin-bottom: 24px;\n}\n\n.feedback-textarea {\n  width: 100%;\n  min-height: 100px;\n  font-size: 15px;\n  color: var(--text-main);\n}\n\n.char-count {\n  text-align: right;\n  font-size: 12px;\n  color: #C7C7CC;\n  margin-top: 8px;\n}\n\n.media-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }\n\n.media-item, .add-btn {\n  width: calc((100% - 24px) / 4);\n  aspect-ratio: 1;\n  border-radius: 8px;\n  overflow: hidden;\n  background: #F2F4F7;\n  position: relative;\n}\n\n.media-img { width: 100%; height: 100%; }\n\n.delete-btn {\n  position: absolute; top: 0; right: 0;\n  background: rgba(0,0,0,0.4);\n  border-bottom-left-radius: 8px;\n  width: 20px; height: 20px;\n  display: flex; align-items: center; justify-content: center;\n}\n\n.add-btn { display: flex; justify-content: center; align-items: center; }\n\n.contact-input-box {\n  background: var(--surface);\n  border-radius: 14px;\n  padding: 0 16px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n}\n.contact-input { flex: 1; font-size: 15px; }\n.input-placeholder { color: #C7C7CC; }\n</style>\n","import MiniProgramPage from '/Users/mulaotou/Documents/statud/Replace/ReplaceFronten/pages/feedback/feedback.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onMounted","uni"],"mappings":";;;AAyGA,MAAM,UAAU;;;;AALhB,UAAM,kBAAkBA,cAAAA,IAAI,CAAC;AAC7B,UAAM,iBAAiBA,cAAAA,IAAI,CAAC;AAC5B,UAAM,mBAAmBA,cAAAA,IAAI,CAAC;AAC9B,UAAM,UAAUA,cAAAA,IAAI,EAAE;AACtB,UAAM,cAAcA,cAAAA,IAAI,EAAE;AAE1B,UAAM,mBAAmBA,cAAAA,IAAI,CAAC;AAC9B,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,eAAeA,cAAAA,IAAI,KAAK;AAE9B,UAAM,QAAQ;AAAA,MACZ,EAAE,OAAO,QAAQ,OAAO,WAAY;AAAA,MACpC,EAAE,OAAO,UAAU,OAAO,MAAO;AAAA,MACjC,EAAE,OAAO,QAAQ,OAAO,QAAS;AAAA,IACnC;AAGA,UAAM,gBAAgBC,cAAQ,SAAC,MAAM,aAAa,QAAQ,WAAW,MAAM;AAG3EC,kBAAAA,UAAU,MAAM;AACd,YAAM,aAAaC,oBAAI;AACvB,sBAAgB,QAAQ,WAAW,mBAAmB;AAEtD,qBAAe,QAAQ,WAAW,iBAAiB,WAAW,eAAe,SAAS;AAAA,IACxF,CAAC;AAGD,UAAM,aAAa,CAAC,UAAU;AAAE,uBAAiB,QAAQ;AAAA;AACzD,UAAM,cAAc,CAAC,MAAM;AAAE,uBAAiB,QAAQ,EAAE,OAAO,MAAM;AAAA;AACrE,UAAM,cAAc,CAAC,UAAU;AAAE,gBAAU,MAAM,OAAO,OAAO,CAAC;AAAA;AAChE,UAAM,SAAS,MAAM;AAAEA,oBAAAA,MAAI,aAAa,EAAE,OAAO,EAAC,CAAE;AAAA;AAEpD,UAAM,cAAc,MAAM;AACxBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO,IAAI,UAAU,MAAM;AAAA,QAC3B,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,oBAAU,QAAQ,CAAC,GAAG,UAAU,OAAO,GAAG,IAAI,aAAa;AAAA,QAC5D;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,iBAAiB,MAAM;AAC3B,UAAI,QAAQ,MAAM,SAAS,GAAG;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD;AAAA,MACD;AACD,mBAAa,QAAQ;AACrB,iBAAW,MAAM;AACf,qBAAa,QAAQ;AACrBA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,MACjD,GAAE,GAAI;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJA,GAAG,WAAW,eAAe;"}