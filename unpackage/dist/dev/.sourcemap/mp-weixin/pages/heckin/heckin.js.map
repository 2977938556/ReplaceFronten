{"version":3,"file":"heckin.js","sources":["pages/heckin/heckin.vue","pages/heckin/heckin.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <!-- 状态栏占位 -->\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\n    <!-- 导航栏 -->\n    <view class=\"nav-bar\">\n      <!-- 纯CSS绘制的返回箭头 -->\n      <view class=\"nav-btn\" @click=\"goBack\">\n        <view class=\"icon-back\"></view>\n      </view>\n      <view class=\"page-title\">意见反馈</view>\n      <view style=\"width:36px;\"></view>\n    </view>\n\n    <!-- 滚动内容区 -->\n    <scroll-view scroll-y class=\"scroll-content\">\n      \n      <!-- 1. 类型选择 -->\n      <view class=\"section-label\">反馈类型</view>\n      <view class=\"type-group\">\n        <view \n          v-for=\"(item, index) in types\" \n          :key=\"index\"\n          class=\"type-chip\" \n          :class=\"{ active: currentTypeIndex === index }\" \n          @click=\"selectType(index)\"\n        >\n          {{ item.label }}\n        </view>\n      </view>\n\n      <!-- 2. 内容输入与图片上传 -->\n      <view class=\"section-label\">详细描述</view>\n      <view class=\"input-card\">\n        <textarea \n          class=\"feedback-textarea\" \n          v-model=\"content\" \n          placeholder=\"请详细描述您遇到的问题或建议，您的声音对我们很重要...\" \n          :maxlength=\"maxChar\" \n          @input=\"handleInput\"\n          cursor-spacing=\"20\"\n        ></textarea>\n        \n        <!-- 图片上传区域 (九宫格逻辑) -->\n        <view class=\"media-grid\">\n          <!-- 已选图片 -->\n          <view class=\"media-item\" v-for=\"(img, index) in imageList\" :key=\"index\">\n            <image class=\"media-img\" :src=\"img\" mode=\"aspectFill\"></image>\n            <!-- 纯CSS绘制的删除叉号 -->\n            <view class=\"delete-btn\" @click=\"removeImage(index)\">\n              <view class=\"icon-close\"></view>\n            </view>\n          </view>\n\n          <!-- 添加按钮 (最多9张) -->\n          <view class=\"add-btn\" v-if=\"imageList.length < 9\" @click=\"chooseImage\">\n            <!-- 纯CSS绘制的加号 -->\n            <view class=\"icon-plus\"></view>\n          </view>\n        </view>\n\n        <view class=\"char-count\">{{ currentCharCount }}/{{ maxChar }}</view>\n      </view>\n\n      <!-- 3. 联系方式 -->\n      <view class=\"section-label\">联系方式 (选填)</view>\n      <view class=\"contact-input-box\">\n        <input \n          class=\"contact-input\" \n          v-model=\"contactInfo\" \n          placeholder=\"留下您的微信或邮箱，方便我们联系您\" \n          placeholder-class=\"input-placeholder\"\n        />\n      </view>\n    </scroll-view>\n\n    <!-- 底部提交按钮 -->\n    <view class=\"bottom-bar\" :style=\"{ paddingBottom: safeAreaBottom + 'px' }\">\n      <button \n        class=\"submit-btn\" \n        :class=\"{ disabled: isSubmitting }\" \n        :disabled=\"isSubmitting\" \n        @click=\"submitFeedback\"\n      >\n        {{ submitBtnText }}\n      </button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\n\n// --- 状态定义 ---\nconst statusBarHeight = ref(0);\nconst safeAreaBottom = ref(0);\nconst currentTypeIndex = ref(0);\nconst content = ref('');\nconst contactInfo = ref('');\nconst maxChar = 200;\nconst currentCharCount = ref(0);\nconst imageList = ref([]); \nconst isSubmitting = ref(false);\n\nconst types = [\n  { label: '功能建议', value: 'proposal' },\n  { label: '产品 Bug', value: 'bug' },\n  { label: '其他吐槽', value: 'other' }\n];\n\nconst submitBtnText = computed(() => isSubmitting.value ? '提交中...' : '提交反馈');\n\nonMounted(() => {\n  const systemInfo = uni.getSystemInfoSync();\n  statusBarHeight.value = systemInfo.statusBarHeight || 44;\n  safeAreaBottom.value = systemInfo.safeAreaInsets ? systemInfo.safeAreaInsets.bottom : 0;\n});\n\nconst selectType = (index) => {\n  currentTypeIndex.value = index;\n};\n\nconst handleInput = (e) => {\n  currentCharCount.value = e.detail.value.length;\n};\n\nconst chooseImage = () => {\n  uni.chooseImage({\n    count: 9 - imageList.value.length,\n    sizeType: ['compressed'],\n    sourceType: ['album', 'camera'],\n    success: (res) => {\n      imageList.value = [...imageList.value, ...res.tempFilePaths];\n    }\n  });\n};\n\nconst removeImage = (index) => {\n  imageList.value.splice(index, 1);\n};\n\nconst goBack = () => {\n  uni.navigateBack({ delta: 1 });\n};\n\nconst submitFeedback = () => {\n  if (content.value.length < 1) {\n    uni.showToast({ title: '请填写反馈内容', icon: 'none' });\n    return;\n  }\n  isSubmitting.value = true;\n  setTimeout(() => {\n    isSubmitting.value = false;\n    uni.showToast({ title: '提交成功，感谢反馈！', icon: 'success' });\n  }, 1000);\n};\n</script>\n\n<style scoped>\n/* --- CSS 变量与基础重置 --- */\n:root {\n  --primary: #111111;\n  --surface: #FFFFFF;\n  --bg: #F5F7FA;\n  --text-main: #1D1D1F;\n  --text-sub: #8E8E93;\n}\n\n.page {\n  background-color: var(--bg);\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n/* --- 导航栏 --- */\n.nav-bar {\n  height: 44px;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: var(--bg);\n  z-index: 10;\n  flex-shrink: 0;\n}\n\n.nav-btn {\n  width: 36px; \n  height: 36px;\n  border-radius: 50%;\n  display: flex; \n  justify-content: center; \n  align-items: center;\n  background: rgba(0,0,0,0.03);\n}\n\n/* --- 纯CSS图标核心样式 --- */\n\n/* 1. 返回箭头 < */\n.icon-back {\n  width: 10px; \n  height: 10px; \n  border-left: 2.5px solid #1D1D1F; \n  border-bottom: 2.5px solid #1D1D1F; \n  /* 通过旋转 \"L\" 形得到 \"<\" */\n  transform: rotate(45deg); \n  margin-right: 2px; /* 视觉微调 */\n}\n\n/* 2. 加号 + */\n.icon-plus {\n  position: relative;\n  width: 24px;\n  height: 24px;\n}\n\n.icon-plus::before,\n.icon-plus::after {\n  content: '';\n  position: absolute;\n  top: 50%; left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #A0A0A5;\n}\n\n.icon-plus::before { width: 14px; height: 2px; } /* 横向 - */\n.icon-plus::after { width: 2px; height: 14px; } /* 纵向 | */\n\n/* 3. 删除叉号 x */\n.icon-close {\n  position: relative;\n  width: 14px;\n  height: 14px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.icon-close::before,\n.icon-close::after {\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 2px;\n  background-color: #fff;\n}\n\n/* 两条线旋转45度形成X */\n.icon-close::before { transform: rotate(45deg); }\n.icon-close::after { transform: rotate(-45deg); }\n\n/* --- 页面其他样式 (保持不变) --- */\n\n.page-title {\n  font-size: 17px;\n  font-weight: 600;\n  color: var(--text-main);\n}\n\n.scroll-content {\n  flex: 1;\n  padding: 0 20px 20px 20px;\n  box-sizing: border-box;\n}\n\n.section-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-main);\n  margin-bottom: 12px;\n  margin-top: 24px;\n  margin-left: 4px;\n}\n.section-label:first-child { margin-top: 0; }\n\n.type-group {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 10px;\n}\n\n.type-chip {\n  flex: 1;\n  height: 44px;\n  background: var(--surface);\n  border-radius: 14px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-sub);\n  transition: all 0.2s;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.02);\n  border: 1px solid transparent;\n}\n\n.type-chip.active {\n  background: var(--primary);\n  color: white;\n  font-weight: 600;\n  box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n  transform: translateY(-1px);\n}\n\n.input-card {\n  background: var(--surface);\n  border-radius: 20px;\n  padding: 20px;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.02);\n  position: relative;\n  margin-bottom: 24px;\n}\n\n.feedback-textarea {\n  width: 100%;\n  min-height: 120px;\n  border: none; outline: none;\n  background: transparent;\n  font-size: 16px;\n  line-height: 1.5;\n  color: var(--text-main);\n}\n\n.char-count {\n  position: absolute;\n  bottom: 12px; right: 16px;\n  font-size: 12px;\n  color: #C7C7CC;\n}\n\n.media-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 16px;\n}\n\n.media-item, .add-btn {\n  width: calc((100% - 30px) / 4);\n  aspect-ratio: 1;\n  border-radius: 12px;\n  overflow: hidden;\n  background: #F2F4F7;\n  position: relative;\n}\n\n.media-img { width: 100%; height: 100%; }\n\n.delete-btn {\n  position: absolute;\n  top: 0; right: 0;\n  background: rgba(0,0,0,0.5);\n  border-bottom-left-radius: 12px;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.add-btn {\n  display: flex;\n  justify-content: center; \n  align-items: center;\n  cursor: pointer;\n}\n\n.contact-input-box {\n  background: var(--surface);\n  border-radius: 16px;\n  padding: 0 20px;\n  height: 56px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 2px 12px rgba(0,0,0,0.02);\n}\n\n.contact-input {\n  width: 100%; border: none;\n  background: transparent;\n  font-size: 15px;\n  color: var(--text-main);\n}\n\n.input-placeholder { color: #C7C7CC; }\n\n.bottom-bar {\n  position: absolute; bottom: 0; left: 0; width: 100%;\n  padding: 20px 24px 20px 24px; \n  background: linear-gradient(to top, rgba(245,247,250,1) 80%, rgba(245,247,250,0));\n  z-index: 100;\n}\n\n.submit-btn {\n  width: 100%; height: 56px;\n  background: var(--primary);\n  border-radius: 28px;\n  color: white;\n  font-size: 17px;\n  font-weight: 700;\n  border: none;\n  display: flex; justify-content: center; align-items: center;\n  box-shadow: 0 10px 25px rgba(0,0,0,0.15);\n  transition: opacity 0.2s;\n}\n\n.submit-btn::after { border: none; }\n.submit-btn:active { opacity: 0.8; transform: scale(0.98); }\n.submit-btn.disabled { background: #CCC; box-shadow: none; opacity: 1; }\n\n</style>\n","import MiniProgramPage from '/Users/mulaotou/Documents/statud/Replace/ReplaceFronten/pages/heckin/heckin.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onMounted","uni"],"mappings":";;AAoGA,MAAM,UAAU;;;;AALhB,UAAM,kBAAkBA,cAAAA,IAAI,CAAC;AAC7B,UAAM,iBAAiBA,cAAAA,IAAI,CAAC;AAC5B,UAAM,mBAAmBA,cAAAA,IAAI,CAAC;AAC9B,UAAM,UAAUA,cAAAA,IAAI,EAAE;AACtB,UAAM,cAAcA,cAAAA,IAAI,EAAE;AAE1B,UAAM,mBAAmBA,cAAAA,IAAI,CAAC;AAC9B,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,eAAeA,cAAAA,IAAI,KAAK;AAE9B,UAAM,QAAQ;AAAA,MACZ,EAAE,OAAO,QAAQ,OAAO,WAAY;AAAA,MACpC,EAAE,OAAO,UAAU,OAAO,MAAO;AAAA,MACjC,EAAE,OAAO,QAAQ,OAAO,QAAS;AAAA,IACnC;AAEA,UAAM,gBAAgBC,cAAQ,SAAC,MAAM,aAAa,QAAQ,WAAW,MAAM;AAE3EC,kBAAAA,UAAU,MAAM;AACd,YAAM,aAAaC,oBAAI;AACvB,sBAAgB,QAAQ,WAAW,mBAAmB;AACtD,qBAAe,QAAQ,WAAW,iBAAiB,WAAW,eAAe,SAAS;AAAA,IACxF,CAAC;AAED,UAAM,aAAa,CAAC,UAAU;AAC5B,uBAAiB,QAAQ;AAAA,IAC3B;AAEA,UAAM,cAAc,CAAC,MAAM;AACzB,uBAAiB,QAAQ,EAAE,OAAO,MAAM;AAAA,IAC1C;AAEA,UAAM,cAAc,MAAM;AACxBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO,IAAI,UAAU,MAAM;AAAA,QAC3B,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,oBAAU,QAAQ,CAAC,GAAG,UAAU,OAAO,GAAG,IAAI,aAAa;AAAA,QAC5D;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,cAAc,CAAC,UAAU;AAC7B,gBAAU,MAAM,OAAO,OAAO,CAAC;AAAA,IACjC;AAEA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,aAAa,EAAE,OAAO,EAAG,CAAA;AAAA,IAC/B;AAEA,UAAM,iBAAiB,MAAM;AAC3B,UAAI,QAAQ,MAAM,SAAS,GAAG;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD;AAAA,MACD;AACD,mBAAa,QAAQ;AACrB,iBAAW,MAAM;AACf,qBAAa,QAAQ;AACrBA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,UAAS,CAAE;AAAA,MACvD,GAAE,GAAI;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3JA,GAAG,WAAW,eAAe;"}