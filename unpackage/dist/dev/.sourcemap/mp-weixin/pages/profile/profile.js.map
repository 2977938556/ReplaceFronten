{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","pages/profile/profile.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"page-container\">\n\t\t<!-- 顶部背景装饰 (固定定位) -->\n\t\t<view class=\"top-decoration\"></view>\n\n\t\t<!-- 页面内容主体 -->\n\t\t<view class=\"content-wrapper\">\n\t\t\t<!-- 状态栏占位 (防止刘海遮挡) -->\n\t\t\t<view class=\"status-bar\"></view>\n\t\t\t\n\t\t\t<!-- 自定义导航栏标题 (可选，视设计而定) -->\n\t\t\t<view class=\"nav-bar\">\n\t\t\t\t<text class=\"nav-title\">个人中心</text>\n\t\t\t</view>\n\n\t\t\t<!-- 滚动区域 -->\n\t\t\t<scroll-view scroll-y class=\"scroll-content\">\n\t\t\t\t\n\t\t\t\t<!-- 个人资料卡片 -->\n\t\t\t\t<view class=\"profile-card\" @tap=\"handleProfileClick\">\n\t\t\t\t\t<view class=\"avatar-wrapper\">\n\t\t\t\t\t\t<image :src=\"userInfo.avatar\" mode=\"aspectFill\" class=\"avatar-img\"></image>\n\t\t\t\t\t\t<!-- 编辑图标 -->\n\t\t\t\t\t\t<view class=\"edit-badge\">\n\t\t\t\t\t\t\t<image src=\"https://img.icons8.com/ios-glyphs/60/ffffff/edit--v1.png\" class=\"badge-icon\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"profile-info\">\n\t\t\t\t\t\t<text class=\"user-name\">{{ userInfo.nickname }}</text>\n\t\t\t\t\t\t<view class=\"user-id-row\" v-if=\"userInfo.isLoggedIn\">\n\t\t\t\t\t\t\t<text class=\"id-text\">ID: {{ userInfo.id }}</text>\n\t\t\t\t\t\t\t<!-- 复制图标 -->\n\t\t\t\t\t\t\t<image src=\"https://img.icons8.com/material-outlined/48/999999/copy.png\" class=\"copy-icon\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 右侧箭头 -->\n\t\t\t\t\t<view class=\"card-arrow\"></view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 数据统计区域 -->\n\t\t\t\t<view class=\"stats-row\">\n\t\t\t\t\t<view class=\"stat-card\" @tap=\"viewTotalStats\">\n\t\t\t\t\t\t<text class=\"stat-num\">{{ formatNumber(stats.totalCheckins) }}</text>\n\t\t\t\t\t\t<text class=\"stat-label\">累计打卡</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"stat-card\" @tap=\"viewAllCategories\">\n\t\t\t\t\t\t<text class=\"stat-num\">{{ stats.categoryCount }}</text>\n\t\t\t\t\t\t<text class=\"stat-label\">足迹分类</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 系统菜单 -->\n\t\t\t\t<view class=\"menu-group\">\n\t\t\t\t\t<!-- 意见反馈 -->\n\t\t\t\t\t<view class=\"menu-item\" @tap=\"goToFeedback\">\n\t\t\t\t\t\t<view class=\"menu-left\">\n\t\t\t\t\t\t\t<image src=\"https://img.icons8.com/fluency-systems-regular/48/000000/comments.png\" class=\"menu-icon\"></image>\n\t\t\t\t\t\t\t<text>意见反馈</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"menu-right\">\n\t\t\t\t\t\t\t<view class=\"arrow-right\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 关于我们 -->\n\t\t\t\t\t<view class=\"menu-item\" @tap=\"goToAbout\">\n\t\t\t\t\t\t<view class=\"menu-left\">\n\t\t\t\t\t\t\t<image src=\"https://img.icons8.com/fluency-systems-regular/48/000000/info.png\" class=\"menu-icon\"></image>\n\t\t\t\t\t\t\t<text>关于生活足迹</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"menu-right\">\n\t\t\t\t\t\t\t<view class=\"arrow-right\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 退出登录按钮 (仅登录可见) -->\n\t\t\t\t<view class=\"logout-btn\" v-if=\"userInfo.isLoggedIn\" @tap=\"handleLogout\">\n\t\t\t\t\t<text>退出登录</text>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 版本信息 -->\n\t\t\t\t<view class=\"version-info\">\n\t\t\t\t\t<text>Version {{ version }} (Build {{ buildNumber }})</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 底部垫高，防止被 TabBar 遮挡 -->\n\t\t\t\t<view style=\"height: 40rpx;\"></view>\n\n\t\t\t</scroll-view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\n\nconst version = ref('1.0.2')\nconst buildNumber = ref('24')\n\nconst userInfo = reactive({\n\tavatar: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',\n\tnickname: '微信用户',\n\tid: '8839201',\n\tisLoggedIn: true\n})\n\nconst stats = reactive({\n\ttotalCheckins: 1208,\n\tcategoryCount: 12\n})\n\nonMounted(() => {\n\tloadUserData()\n})\n\nconst loadUserData = () => {\n\tconst storedUserData = uni.getStorageSync('userData')\n\tconst isGuestMode = uni.getStorageSync('isGuestMode')\n\t\n\tif (storedUserData && storedUserData.isLoggedIn) {\n\t\tuserInfo.isLoggedIn = true\n\t\tuserInfo.id = storedUserData.id || '8839201'\n\t\tuserInfo.nickname = storedUserData.nickname || '微信用户'\n\t\t// userInfo.avatar = ...\n\t} else if (isGuestMode) {\n\t\tuserInfo.isLoggedIn = false\n\t\tuserInfo.nickname = '点击登录'\n\t\tuserInfo.avatar = 'https://static.yeahqq.com/images/default-avatar.png'\n\t}\n}\n\nconst formatNumber = (num) => {\n\treturn num ? num.toLocaleString() : '0'\n}\n\nconst handleProfileClick = () => {\n\tif (userInfo.isLoggedIn) {\n\t\t// 编辑资料逻辑\n\t} else {\n\t\tgoToLogin()\n\t}\n}\n\nconst handleLogout = () => {\n\tuni.showModal({\n\t\ttitle: '提示',\n\t\tcontent: '确定要退出登录吗？',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\tuserInfo.isLoggedIn = false\n\t\t\t\tuserInfo.nickname = '点击登录'\n\t\t\t\tuni.showToast({ title: '已退出', icon: 'none' })\n\t\t\t}\n\t\t}\n\t})\n}\n\nconst goToLogin = () => uni.navigateTo({ url: '/pages/login/login' })\nconst viewTotalStats = () => uni.showToast({ title: '统计详情', icon: 'none' })\nconst viewAllCategories = () => uni.showToast({ title: '分类列表', icon: 'none' })\nconst goToFeedback = () => uni.navigateTo({ url: '/pages/feedback/feedback' })\nconst goToAbout = () => uni.navigateTo({ url: '/pages/about/about' })\n\n</script>\n\n<style lang=\"scss\">\npage {\n\t/* 关键：固定页面高度，防止滚动穿透 */\n\theight: 100%;\n\tbackground-color: #F5F7FA;\n\toverflow: hidden;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.page-container {\n\theight: 100%;\n\tposition: relative;\n\tbackground-color: #F5F7FA;\n}\n\n/* 顶部装饰背景 */\n.top-decoration {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 600rpx; /* 加高一点 */\n\tbackground: linear-gradient(180deg, #E3E9F3 0%, rgba(245, 247, 250, 0) 100%);\n\tz-index: 1;\n}\n\n.content-wrapper {\n\tposition: relative;\n\tz-index: 2; /* 确保内容在背景之上 */\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n/* 状态栏适配 */\n.status-bar {\n\theight: var(--status-bar-height);\n\twidth: 100%;\n\tflex-shrink: 0;\n}\n\n/* 简单的顶部标题栏 */\n.nav-bar {\n\theight: 88rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-left: 40rpx;\n\tflex-shrink: 0;\n}\n.nav-title {\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #1D1D1F;\n}\n\n/* 滚动区域 */\n.scroll-content {\n\tflex: 1;\n\theight: 0; /* Flex 布局下的滚动关键 */\n\twidth: 100%;\n}\n\n/* 个人资料卡片 */\n.profile-card {\n\tmargin: 20rpx 40rpx 40rpx 40rpx; /* 上边距改小，因为有 navbar */\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n}\n\n.avatar-wrapper {\n\tposition: relative;\n\tmargin-right: 32rpx;\n}\n\n.avatar-img {\n\twidth: 140rpx;\n\theight: 140rpx;\n\tborder-radius: 50%;\n\tborder: 6rpx solid #FFFFFF;\n\tbox-shadow: 0 12rpx 24rpx rgba(0,0,0,0.06);\n\tbackground-color: #eee;\n}\n\n.edit-badge {\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n\twidth: 44rpx;\n\theight: 44rpx;\n\tbackground: #111;\n\tborder-radius: 50%;\n\tborder: 4rpx solid #FFFFFF;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.badge-icon {\n\twidth: 22rpx;\n\theight: 22rpx;\n}\n\n.profile-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n\n.user-name {\n\tfont-size: 44rpx;\n\tfont-weight: 800;\n\tcolor: #1D1D1F;\n\tmargin-bottom: 8rpx;\n\tline-height: 1.2;\n}\n\n.user-id-row {\n\tdisplay: flex;\n\talign-items: center;\n\topacity: 0.6;\n}\n\n.id-text {\n\tfont-size: 26rpx;\n\tcolor: #000;\n\tmargin-right: 10rpx;\n}\n\n.copy-icon {\n\twidth: 24rpx;\n\theight: 24rpx;\n}\n\n/* 手写CSS箭头 */\n.card-arrow {\n\twidth: 16rpx;\n\theight: 16rpx;\n\tborder-top: 4rpx solid #C7C7CC;\n\tborder-right: 4rpx solid #C7C7CC;\n\ttransform: rotate(45deg);\n}\n\n/* 统计卡片 */\n.stats-row {\n\tdisplay: flex;\n\tmargin: 0 40rpx 40rpx 40rpx;\n\tgap: 24rpx;\n}\n\n.stat-card {\n\tflex: 1;\n\tbackground: #FFFFFF;\n\tborder-radius: 32rpx;\n\tpadding: 32rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tbox-shadow: 0 4rpx 16rpx rgba(0,0,0,0.03);\n}\n\n.stat-num {\n\tfont-size: 48rpx;\n\tfont-weight: 700;\n\tcolor: #1D1D1F;\n\tmargin-bottom: 4rpx;\n}\n\n.stat-label {\n\tfont-size: 24rpx;\n\tcolor: #8E8E93;\n}\n\n/* 菜单列表 */\n.menu-group {\n\tbackground: #FFFFFF;\n\tborder-radius: 32rpx;\n\tmargin: 0 40rpx 40rpx 40rpx;\n\tpadding: 0 32rpx;\n\tbox-shadow: 0 4rpx 16rpx rgba(0,0,0,0.03);\n}\n\n.menu-item {\n\theight: 110rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tborder-bottom: 1rpx solid #F0F0F0;\n}\n.menu-item:last-child {\n\tborder-bottom: none;\n}\n.menu-item:active {\n\topacity: 0.7;\n}\n\n.menu-left {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 30rpx;\n\tcolor: #333;\n\tfont-weight: 500;\n}\n\n.menu-icon {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tmargin-right: 24rpx;\n}\n\n/* 统一的右侧箭头样式 */\n.arrow-right {\n\twidth: 14rpx;\n\theight: 14rpx;\n\tborder-top: 3rpx solid #C7C7CC;\n\tborder-right: 3rpx solid #C7C7CC;\n\ttransform: rotate(45deg);\n}\n\n/* 退出登录按钮 */\n.logout-btn {\n\tmargin: 0 40rpx;\n\theight: 96rpx;\n\tbackground-color: #fff;\n\tborder-radius: 32rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: #FF3B30;\n\tfont-size: 30rpx;\n\tfont-weight: 600;\n\tbox-shadow: 0 4rpx 16rpx rgba(0,0,0,0.03);\n}\n.logout-btn:active {\n\tbackground-color: #FAFAFA;\n}\n\n.version-info {\n\ttext-align: center;\n\tfont-size: 24rpx;\n\tcolor: #D1D1D6;\n\tmargin-top: 40rpx;\n\tpadding-bottom: 40rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/mulaotou/Documents/statud/Replace/ReplaceFronten/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","onMounted","uni"],"mappings":";;;;;AAmGA,UAAM,UAAUA,cAAG,IAAC,OAAO;AAC3B,UAAM,cAAcA,cAAG,IAAC,IAAI;AAE5B,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,IAAI;AAAA,MACJ,YAAY;AAAA,IACb,CAAC;AAED,UAAM,QAAQA,cAAAA,SAAS;AAAA,MACtB,eAAe;AAAA,MACf,eAAe;AAAA,IAChB,CAAC;AAEDC,kBAAAA,UAAU,MAAM;AACf,mBAAc;AAAA,IACf,CAAC;AAED,UAAM,eAAe,MAAM;AAC1B,YAAM,iBAAiBC,cAAAA,MAAI,eAAe,UAAU;AACpD,YAAM,cAAcA,cAAAA,MAAI,eAAe,aAAa;AAEpD,UAAI,kBAAkB,eAAe,YAAY;AAChD,iBAAS,aAAa;AACtB,iBAAS,KAAK,eAAe,MAAM;AACnC,iBAAS,WAAW,eAAe,YAAY;AAAA,MAE/C,WAAU,aAAa;AACvB,iBAAS,aAAa;AACtB,iBAAS,WAAW;AACpB,iBAAS,SAAS;AAAA,MAClB;AAAA,IACF;AAEA,UAAM,eAAe,CAAC,QAAQ;AAC7B,aAAO,MAAM,IAAI,eAAc,IAAK;AAAA,IACrC;AAEA,UAAM,qBAAqB,MAAM;AAChC,UAAI,SAAS;AAAY;AAAA,WAElB;AACN,kBAAW;AAAA,MACX;AAAA,IACF;AAEA,UAAM,eAAe,MAAM;AAC1BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,qBAAS,aAAa;AACtB,qBAAS,WAAW;AACpBA,0BAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,QAAQ;AAAA,UAC5C;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;AAEA,UAAM,YAAY,MAAMA,cAAAA,MAAI,WAAW,EAAE,KAAK,qBAAoB,CAAE;AACpE,UAAM,iBAAiB,MAAMA,cAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC1E,UAAM,oBAAoB,MAAMA,cAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7E,UAAM,eAAe,MAAMA,cAAAA,MAAI,WAAW,EAAE,KAAK,2BAA0B,CAAE;AAC7E,UAAM,YAAY,MAAMA,cAAAA,MAAI,WAAW,EAAE,KAAK,qBAAoB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnKpE,GAAG,WAAW,eAAe;"}